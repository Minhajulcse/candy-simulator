<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mofiz Candy Story ‚Äì Visualization</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="UTF-8">
  <title>Mofiz Candy Visualizer</title>
<style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

body {
background: #0f172a;
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #e2e8f0;
      font-family: Arial, sans-serif;
      text-align: center;
padding: 20px;
}

    .app {
      max-width: 900px;
      width: 100%;
      background: #020617;
      border-radius: 18px;
      padding: 24px 20px 28px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
      border: 1px solid #1f2937;
    }

h1 {
      font-size: 1.7rem;
      margin-bottom: 6px;
      text-align: center;
    }

    .subtitle {
      text-align: center;
      font-size: 0.9rem;
      color: #9ca3af;
      margin-bottom: 18px;
    }

    .story {
      font-size: 0.9rem;
      line-height: 1.4;
      background: rgba(15, 23, 42, 0.8);
      border-radius: 12px;
      padding: 10px 12px;
      margin-bottom: 16px;
      border: 1px dashed #1e293b;
    }

    .highlight {
      color: #facc15;
      font-weight: 600;
    }

    .scene-wrapper {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-bottom: 18px;
    }

    .step-label {
      font-size: 0.95rem;
      font-weight: 600;
      color: #a5b4fc;
    }

    .scene {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      gap: 14px;
    }

    .card {
      flex: 1 1 220px;
      max-width: 260px;
      background: #020617;
      border-radius: 16px;
      padding: 14px 14px 16px;
      border: 1px solid #1f2937;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top, rgba(56, 189, 248, 0.18), transparent 55%);
      opacity: 0.5;
      pointer-events: none;
      margin-bottom: 8px;
}

    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 6px;
      position: relative;
      z-index: 1;
    .box {
      background: #1e293b;
      padding: 15px;
      border-radius: 10px;
      max-width: 700px;
      margin: auto;
}

    .avatar {
      font-size: 1.6rem;
      margin-right: 8px;
    }

    .card-title {
      font-size: 0.98rem;
      font-weight: 600;
    }

    .card-sub {
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .candies {
      margin-top: 6px;
      position: relative;
      z-index: 1;
    }

    .candies-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #9ca3af;
      margin-bottom: 4px;
    }

    .candies-value {
      font-size: 1.3rem;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .candies-value span {
      vertical-align: middle;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 0.75rem;
      border: 1px solid #1f2937;
      background: rgba(15, 23, 42, 0.9);
      color: #9ca3af;
      margin-top: 4px;
    }

    .arrow {
      font-size: 1.6rem;
      margin: 0 4px;
    }

    .panel {
      background: rgba(15, 23, 42, 0.85);
      border-radius: 12px;
      padding: 10px 12px;
      border: 1px solid #1f2937;
      font-size: 0.85rem;
      line-height: 1.3;
    }

    .panel strong {
      color: #bbf7d0;
    }

    .panel-line {
      display: flex;
      justify-content: space-between;
      margin-top: 4px;
    }

    .panel-label {
      color: #9ca3af;
    }

    .panel-value {
      font-weight: 600;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-top: 16px;
      flex-wrap: wrap;
    }

    .buttons {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    input {
      padding: 8px;
      border-radius: 6px;
      border: none;
      width: 120px;
      font-size: 16px;
      margin-top: 10px;
}

button {
      padding: 8px 16px;
      background: #2563eb;
border: none;
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 0.9rem;
      color: white;
      border-radius: 6px;
cursor: pointer;
      background: #1d4ed8;
      color: #e5e7eb;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.08s ease;
      font-size: 15px;
      margin-left: 10px;
}

    button:disabled {
      background: #111827;
      color: #4b5563;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    button:not(:disabled):hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(31, 41, 55, 0.6);
      background: #2563eb;
    }

    .step-info {
      font-size: 0.8rem;
      color: #9ca3af;
    table {
      width: 100%;
      margin-top: 20px;
      border-collapse: collapse;
      color: #e2e8f0;
}

    .log {
      margin-top: 12px;
      font-size: 0.8rem;
      max-height: 120px;
      overflow-y: auto;
      padding-right: 3px;
    th, td {
      border: 1px solid #334155;
      padding: 10px;
}

    .log-entry {
      margin-bottom: 4px;
      color: #9ca3af;
    th {
      background: #1e40af;
}

    .log-entry span {
      color: #e5e7eb;
      font-weight: 500;
    .visual-card {
      margin-top: 20px;
      padding: 15px;
      background: #1e293b;
      border-radius: 10px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      font-size: 18px;
      line-height: 1.5;
}

    @media (max-width: 640px) {
      .app {
        padding: 18px 14px 22px;
      }
      h1 {
        font-size: 1.4rem;
      }
      .card {
        flex: 1 1 100%;
      }
    .big-emoji {
      font-size: 45px;
}
</style>
</head>
<body>
  <div class="app">
    <h1>üç¨ Mofiz & His Teammates ‚Äì Candy Story</h1>
    <p class="subtitle">Example: 3 teammates, starting with <span class="highlight">7 candies</span>, giving <span class="highlight">8 candies</span> to each.</p>

    <div class="story">
      Mofiz is visiting his <span class="highlight">3 football teammates</span> one by one.
      Before each visit, his candies <span class="highlight">double magically ‚ú®</span>.
      He gives the <span class="highlight">same number of candies</span> to every teammate and wants to finish with
      <span class="highlight">0 candies left</span>.
    </div>

    <div class="scene-wrapper">
      <div class="step-label" id="stepLabel">Step 0 of 3 ¬∑ Before meeting anyone</div>

      <div class="scene">
        <!-- Mofiz card -->
        <div class="card">
          <div class="card-header">
            <div class="avatar">üßç‚Äç‚ôÇÔ∏è</div>
            <div>
              <div class="card-title">Mofiz</div>
              <div class="card-sub">Carries candies between teammates</div>
            </div>
          </div>
          <div class="candies">
            <div class="candies-label">Candies with Mofiz now</div>
            <div class="candies-value">
              <span id="mofizCandies">7</span> üç¨
            </div>
            <div class="pill">
              <span>üéØ Start with 7 candies</span>
            </div>
          </div>
        </div>

        <!-- Arrow -->
        <div class="arrow">‚û°Ô∏è</div>

        <!-- Friend card -->
        <div class="card">
          <div class="card-header">
            <div class="avatar">üßë‚Äçü§ù‚Äçüßë</div>
            <div>
              <div class="card-title">Teammate <span id="friendNumber">‚Äì</span></div>
              <div class="card-sub">Waiting for candies</div>
            </div>
          </div>
          <div class="candies">
            <div class="candies-label">Candies given to this teammate</div>
            <div class="candies-value">
              <span id="givenCandies">0</span> üç¨
            </div>
            <div class="pill">
              <span>Everyone gets the same amount</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Details panel -->
      <div class="panel" id="panelText">
        üí° Press "<strong>Next step</strong>" to see how candies double and how many Mofiz gives.
      </div>
    </div>
  <h1>üç¨ Mofiz Candy Visualizer</h1>
  <p>Enter number of teammates (N), and see step-by-step how candies double!</p>

    <!-- Controls -->
    <div class="controls">
      <div class="buttons">
        <button id="prevBtn" disabled>
          ‚¨ÖÔ∏è Back
        </button>
        <button id="nextBtn">
          Next step ‚û°Ô∏è
        </button>
      </div>
      <div class="step-info" id="stepInfo">
        Step 0 ¬∑ Candies with Mofiz: 7 ¬∑ Given to this teammate: 0
      </div>
    </div>

    <!-- Log -->
    <div class="log" id="log"></div>
  <div class="box">
    <input type="number" id="inputN" min="1" max="60" placeholder="Enter N">
    <button onclick="calculate()">Show Visualization</button>
</div>

  <div id="result"></div>

<script>
    // Steps for the example with 3 teammates
    // Each step happens just before/when he meets that teammate.
    const steps = [
      {
        label: "Step 0 of 3 ¬∑ Before meeting anyone",
        friend: "-",
        beforeDouble: 7,
        afterDouble: 7,
        given: 0,
        left: 7,
        text: "Mofiz is ready to go. He starts with 7 candies in his hand."
      },
      {
        label: "Step 1 of 3 ¬∑ Meeting teammate 1",
        friend: 1,
        beforeDouble: 7,
        afterDouble: 14,
        given: 8,
        left: 6,
        text:
          "Before meeting teammate 1, 7 candies double to 14 ‚ú®. " +
          "He gives 8 candies to teammate 1 and walks away with 6."
      },
      {
        label: "Step 2 of 3 ¬∑ Meeting teammate 2",
        friend: 2,
        beforeDouble: 6,
        afterDouble: 12,
        given: 8,
        left: 4,
        text:
          "Now he has 6 candies. They double to 12 ‚ú®. " +
          "He gives 8 candies to teammate 2 and walks away with 4."
      },
      {
        label: "Step 3 of 3 ¬∑ Meeting teammate 3",
        friend: 3,
        beforeDouble: 4,
        afterDouble: 8,
        given: 8,
        left: 0,
        text:
          "He reaches teammate 3 with 4 candies. They double to 8 ‚ú®. " +
          "He gives 8 candies to teammate 3 and now has 0 candies left. Perfect!"
    function calculate() {
      let N = parseInt(document.getElementById('inputN').value);
      if (!N || N < 1 || N > 60) {
        alert("Please enter a valid N between 1 and 60.");
        return;
}
    ];

    const stepLabel = document.getElementById("stepLabel");
    const mofizCandies = document.getElementById("mofizCandies");
    const givenCandies = document.getElementById("givenCandies");
    const friendNumber = document.getElementById("friendNumber");
    const panelText = document.getElementById("panelText");
    const stepInfo = document.getElementById("stepInfo");
    const logBox = document.getElementById("log");

    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    let currentStep = 0;

    function addLog(message) {
      const div = document.createElement("div");
      div.className = "log-entry";
      div.innerHTML = message;
      logBox.appendChild(div);
      logBox.scrollTop = logBox.scrollHeight;
    }

    function renderStep() {
      const s = steps[currentStep];

      stepLabel.textContent = s.label;
      friendNumber.textContent = s.friend === "-" ? "‚Äì" : s.friend;
      mofizCandies.textContent = s.left; // candies carried after this step
      givenCandies.textContent = s.given;
      let tableHTML = `
        <h2>üìã Step-by-Step Table</h2>
        <table>
          <tr>
            <th>Teammate #</th>
            <th>Candies Before Doubling</th>
            <th>After Doubling</th>
            <th>Candies Given</th>
            <th>Candies Left</th>
          </tr>
      `;

      // Formula: minimum candies = 2^N - 1
      let startCandies = Math.pow(2, N) - 1;
      let giveAmount = Math.pow(2, N);

      let candies = startCandies;

      let visualText = `
        <div class="visual-card">
          <div class="big-emoji">üßç‚Äç‚ôÇÔ∏èüç¨</div>
          <strong>Mofiz starts with ${startCandies} candies.</strong><br>
          He will give <strong>${giveAmount} candies</strong> to each teammate.
          <br><br>
      `;

      for (let i = 1; i <= N; i++) {
        let beforeDouble = candies;
        let afterDouble = candies * 2;
        let left = afterDouble - giveAmount;

        tableHTML += `
          <tr>
            <td>${i}</td>
            <td>${beforeDouble}</td>
            <td>${afterDouble}</td>
            <td>${giveAmount}</td>
            <td>${left}</td>
          </tr>
        `;

        visualText += `
          <div style="margin-top:12px;">
            <strong>‚û°Ô∏è Meeting teammate ${i}</strong><br>
            Candies double: <strong>${beforeDouble} ‚Üí ${afterDouble}</strong> ‚ú®<br>
            Gives <strong>${giveAmount}</strong> candies üç¨<br>
            Walks away with <strong>${left}</strong> candies.
          </div>
        `;

      if (currentStep === 0) {
        panelText.innerHTML =
          "üí° Mofiz is about to start his journey. He has <strong>7 candies</strong>. " +
          "Press <strong>Next step</strong> to see what happens with teammate 1.";
      } else {
        panelText.innerHTML =
          "üßç‚Äç‚ôÇÔ∏è Before teammate " +
          s.friend +
          ": candies double from <strong>" +
          s.beforeDouble +
          "</strong> to <strong>" +
          s.afterDouble +
          "</strong>.<br>" +
          "üç¨ He gives <strong>" +
          s.given +
          " candies</strong> to teammate " +
          s.friend +
          " and walks away with <strong>" +
          s.left +
          "</strong>.";
        candies = left;
}

      stepInfo.textContent =
        "Step " +
        currentStep +
        " ¬∑ Candies with Mofiz after this step: " +
        s.left +
        " ¬∑ Given to this teammate: " +
        s.given;

      prevBtn.disabled = currentStep === 0;
      nextBtn.disabled = currentStep === steps.length - 1;
    }

    prevBtn.addEventListener("click", () => {
      if (currentStep > 0) {
        currentStep--;
        renderStep();
      }
    });
      visualText += `
        <br><strong>üéâ Mofiz ends with 0 candies. Perfect!</strong>
        </div>
      `;

    nextBtn.addEventListener("click", () => {
      if (currentStep < steps.length - 1) {
        currentStep++;
        const s = steps[currentStep];
        addLog(
          "Step " +
            currentStep +
            ": <span>" +
            s.text +
            "</span>"
        );
        renderStep();
      }
    });
      tableHTML += `</table>`;

    // Initial render
    renderStep();
      document.getElementById("result").innerHTML = tableHTML + visualText;
    }
</script>

</body>
</html>
